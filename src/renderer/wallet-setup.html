<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>KRAXEL-WALLET Setup</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
  </head>
  <body class="bg-bg-darker">
    <div class="min-h-screen flex items-center justify-center p-6">
      <div class="max-w-2xl w-full space-y-8">
        <!-- Initial Setup Screen -->
        <div id="setupScreen">
          <div class="text-center">
            <img src="asset://kraxel.png" alt="KRAXEL" class="mx-auto h-24 w-24">
            <h2 class="mt-6 text-2xl font-pixel text-text-secondary animate-glow">
              Welcome to KRAXEL
            </h2>
          </div>

          <!-- Existing Wallets Section -->
          <div id="existingWallets" class="mt-8 mb-8">
            <h3 class="text-sm font-pixel text-text-secondary mb-4">Your Wallets</h3>
            <div id="walletsList" class="space-y-2">
              <!-- Wallet items will be inserted here dynamically -->
            </div>
          </div>

          <div class="relative">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-border"></div>
            </div>
            <div class="relative flex justify-center text-sm">
              <span class="px-2 bg-bg-darker text-text-secondary">or create new</span>
            </div>
          </div>

          <div class="mt-8 space-y-4">
            <!-- Create Wallet Form -->
            <div id="createWalletForm" class="hidden space-y-4 bg-bg-primary border border-border p-6 rounded-lg">
              <h3 class="text-sm font-pixel text-text-secondary mb-4">Create New Wallet</h3>
              
              <div class="space-y-2">
                <label class="block text-text-secondary text-xs">Wallet Name</label>
                <input type="text" 
                       id="walletName" 
                       class="w-full px-3 py-2 bg-bg-dark border border-border rounded-lg text-text-primary text-sm focus:border-success focus:outline-none"
                       placeholder="My Wallet">
              </div>

              <div class="space-y-2">
                <label class="block text-text-secondary text-xs">Security PIN (6 digits)</label>
                <input type="password" 
                       id="walletPin" 
                       maxlength="6" 
                       pattern="\d{6}"
                       class="w-full px-3 py-2 bg-bg-dark border border-border rounded-lg text-text-primary text-sm focus:border-success focus:outline-none"
                       placeholder="******">
                <p class="text-xs text-text-secondary">This PIN will be required to access your wallet</p>
              </div>

              <div class="pt-4">
                <button id="confirmCreate" class="w-full px-4 py-3 border border-success bg-bg-primary hover:bg-success hover:text-bg-dark transition-all duration-300 text-success font-pixel text-sm">
                  Create Wallet
                </button>
              </div>
            </div>

            <!-- Main Buttons -->
            <div id="mainButtons">
              <button id="createWallet" class="w-full px-4 py-3 border border-border bg-bg-primary hover:bg-hover transition-all duration-300 text-text-primary font-pixel text-sm">
                Create New Wallet
              </button>
              
              <button id="importWallet" class="w-full mt-4 px-4 py-3 border border-border bg-bg-primary hover:bg-hover transition-all duration-300 text-text-primary font-pixel text-sm">
                Import Existing Wallet
              </button>
            </div>
          </div>
        </div>

        <!-- Wallet Created Screen -->
        <div id="walletCreatedScreen" class="hidden">
          <div class="text-center mb-8">
            <h2 class="text-xl font-pixel text-success">Wallet Created Successfully!</h2>
          </div>

          <div class="bg-bg-primary border border-border rounded-lg p-6 mb-6">
            <!-- Wallet Address Section -->
            <div class="mb-6">
              <label class="block text-text-secondary text-xs mb-2">Your Wallet Address</label>
              <div class="flex items-center justify-between bg-bg-dark p-3 rounded-lg">
                <div class="flex-grow overflow-x-auto whitespace-nowrap mr-4 font-mono">
                  <span id="walletAddress" class="text-text-primary text-sm"></span>
                </div>
                <button id="copyAddress" class="flex-shrink-0 px-3 py-1 text-xs border border-border hover:bg-hover rounded">
                  Copy
                </button>
              </div>
            </div>

            <!-- Private Key Section -->
            <div class="mb-6">
              <label class="text-text-secondary text-xs mb-2">Private Key</label>
              <div class="relative">
                <div id="privateKeyContainer" 
                     class="bg-bg-dark p-3 rounded-lg filter blur-sm select-none cursor-pointer transition-all duration-300"
                     title="Press and hold to reveal">
                  <span id="walletPrivateKey" class="text-text-primary text-sm font-mono break-all"></span>
                </div>
                <div id="holdCounter" 
                     class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-text-secondary text-lg font-pixel no-blur">
                  3
                </div>
                <div class="text-center mt-2">
                  <span class="text-text-secondary text-xs">Hold for 3 seconds to reveal private key. Once revealed, click to copy.</span>
                </div>
              </div>
              <p class="text-error text-base font-pixel text-center mt-4 animate-pulse">NEVER SHARE YOUR PRIVATE KEY WITH ANYONE!</p>
            </div>

            <!-- Save Button -->
            <div class="space-y-4">
              <button id="saveWallet" class="w-full px-4 py-3 border border-success bg-bg-primary hover:bg-success hover:text-bg-dark transition-all duration-300 text-success font-pixel text-sm">
                I've Saved My Private Key - Continue
              </button>
            </div>
          </div>
        </div>

        <!-- Loading Indicator -->
        <div id="loading" class="hidden text-center">
          <div class="animate-pulse text-text-secondary font-pixel">
            Processing...
          </div>
        </div>
      </div>
    </div>

    <script src="wallet-setup.js"></script>
  </body>
</html> 